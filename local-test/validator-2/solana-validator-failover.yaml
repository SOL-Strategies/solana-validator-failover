validator:
  bin: ./scripts/fdctl-mock.sh
  cluster: mainnet-beta
  public_ip: 67.213.119.47 # don't set IRL
  hostname: validator-2
  identities:
    active: ./local-test/validator-2/active-identity.json
    passive: ./local-test/validator-2/passive-identity.json
  ledger_dir: ./local-test/validator-2/ledger
  rpc_address: http://localhost:8899
  tower:
    dir: ./local-test/validator-2/tower
  failover:
    # firedancer set identity commands
    set_identity_active_cmd_template: "{{ .Bin }} set-identity --config /home/solana/config.toml --force {{ .Identities.Active.KeyFile }}"
    set_identity_passive_cmd_template: "{{ .Bin }} set-identity --config /home/solana/config.toml {{ .Identities.Passive.KeyFile }}"
    peers:
      validator-1:
        address: localhost:9898
    hooks:
      pre:
        when_passive:
          - name: v2_pre_when_passive
            command: ./scripts/hook-mock.sh
            args:
              [
                "--form={{ .PeerNodeName }}",
                "--to={{ .ThisNodeName }}",
                "--us-rpc-url={{ .ThisNodeRPCAddress }}",
                "--us-role={{ .ThisNodeRole }}",
              ]
            must_succeed: true
            environment:
              MY_ENV_VAR: "{{ .ThisNodeName }}"
        when_active:
          - name: v2_pre_when_active
            command: ./scripts/hook-mock.sh
            args:
              [
                "--form={{ .ThisNodeName }}",
                "--to={{ .PeerNodeName }}",
                "--us-rpc-url={{ .ThisNodeRPCAddress }}",
                "--us-role={{ .ThisNodeRole }}",
              ]
            must_succeed: true
      post:
        when_passive:
          - name: v2_post_when_passive
            command: ./scripts/hook-mock.sh
            args: ["--us-role={{ .ThisNodeRole }}"]
        when_active:
          - name: v2_post_when_active
            command: ./scripts/hook-mock.sh
            args: ["--us-role={{ .ThisNodeRole }}"]
